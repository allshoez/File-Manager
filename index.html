<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>File Manager with Review</title>
<style>
/* Reset & Base */
* { margin:0; padding:0; box-sizing:border-box; }
body { font-family: Arial, sans-serif; background:#ffffff; color:#222; transition: background 0.3s, color 0.3s; 
  font-size: 35px;
}
header { margin:2px; padding:10px 20px; background:#2c2c2c; color:#fff; display:flex; align-items:center; justify-content:space-between; border-radius:8px; }
header input { padding:6px 12px; border-radius:6px; border:none; width:200px; background:#333; color:#fff; outline:none; }
.container { padding:20px; display:flex; flex-wrap:wrap; gap:12px; justify-content:flex-start; }

/* File Card */
.item.file {
  width: 60px; height:90px; background:#f5f5f5; color:#222; font-weight:600;
  display:flex; align-items:center; justify-content:center; cursor:pointer; position:relative;
  border:1px solid #ccc; border-radius:6px; box-shadow:0 4px 8px #00000033;
  font-size:0.8rem; text-align:center; padding:50px; margin-bottom:10px;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}
.item.file:hover { transform:translateY(-2px); box-shadow:0 6px 12px #00000040; }

/* Lipatan pojok kanan atas */
.item.file::after {
  content:""; position:absolute; top:0; right:0; width:14px; height:14px;
  background:#ddd; clip-path: polygon(100% 0, 100% 100%, 0 0); border-top-right-radius:3px;
}

/* Garis bawah file */
.item.file::before {
  content:""; position:absolute; bottom:0; left:0; width:100%; height:2px; background:#555;
}

/* Folder Card */
.item.folder {
  width:90px; height:50px; background:#FFD700; color:#222; font-weight:700;
  display:flex; align-items:center; justify-content:center; cursor:pointer; position:relative;
  border:1px solid #daa520; border-radius:6px; box-shadow:0 4px 8px #00000040;
  font-size:0.9rem; transition: transform 0.2s ease, box-shadow 0.2s ease;
}
.item.folder:hover { transform:translateY(-2px); box-shadow:0 6px 14px #0000004d; }

/* Tab depan folder */
.item.folder::before {
  content:""; position:absolute; top:-7px; left:10px; width:40px; height:12px;
  background:#FFD700; border-top-left-radius:4px; border-top-right-radius:4px; border:1px solid #daa520;
}

/* Floating button */
.floating {
  position:fixed;
  bottom:20px;
  right:20px;
  z-index:1000;
}
#mainBtn {
  width:60px;
  height:60px;
  border-radius:50%;
  font-size:24px;
  border:none;
  background:#007bff;
  color:#fff;
  cursor:pointer;
  box-shadow:0 6px 12px #0000004d;
  transition: transform 0.2s ease;
}
#mainBtn:hover { transform:scale(1.1); }

/* Popup aksi */
#actionButtons {
  display:none;
  position:fixed;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  flex-direction:column;
  gap:10px;
  background:#111111;
  padding:15px;
  border-radius:12px;
  box-shadow:0 6px 12px #0000004d;
  z-index:1001;
  min-width:200px;
  align-items:center;
}
#actionButtons button {
  padding:10px 16px;
  border:none;
  border-radius:8px;
  background:#ffffff;
  color:#111111;
  cursor:pointer;
  width:100%;
  font-weight:600;
  transition: background 0.2s ease;
}
#actionButtons button:hover { background:#dddddd; }

/* Modal */
.modal  {
  display:none; position:fixed; top:0; left:0; width:100%; height:100%;
  background:#00000080;
  justify-content:center; align-items:center;
  z-index:1002; transition: opacity 0.3s ease;
}
.modal.show { display:flex; opacity:1; }

.modal-content {
  background:#111111;
  padding:24px; border-radius:16px;
  min-width:320px; max-width:90%;
  box-shadow:0 10px 25px #00000066;
  transform: scale(0.95);
  transition: transform 0.3s ease;
}
.modal.show .modal-content { transform: scale(1); }
.modal-content h3 { color:#ffffff; margin-bottom:14px; }

.modal-content input, .modal-content select {
  width:100%; padding:10px; margin-bottom:14px;
  border-radius:8px; border:1px solid #cccccc; outline:none;
  background:#ffffff;
  color:#222222; font-size:16px;
}
.modal-content input:focus, .modal-content select:focus {
  box-shadow:0 0 6px #6496fa;
}
.modal-content button {
  padding:10px 16px; margin-right:8px; border:none; border-radius:8px;
  cursor:pointer; font-size:15px; transition:background 0.2s ease, transform 0.2s ease;
}
.modal-content button:hover { transform:scale(1.05); }
.modal-content button.confirm { background:#2ca02c; color:#fff; }
.modal-content button.cancel { background:#d9534f; color:#fff; }

/* Editor overlay */
.editor-overlay {
  display:none; position:fixed; top:0; left:0; width:100%; height:100%;
  background:#111111; z-index:10000; flex-direction:column;
}
.editor-overlay textarea {
  flex:1; width:100%; background:#1e1e1e; color:#00ff00; padding:14px;
  font-family:monospace; font-size:16px; border:none; outline:none; border-radius:8px;
}
.editor-overlay .editor-btns { padding:12px; display:flex; gap:10px; background:#222222; border-radius:8px; box-shadow:0 4px 12px #0000004d; }

/* HTML Review Modal */
#htmlReviewModal {
  display:none; position:fixed; top:0; left:0; width:100%; height:100%;
  background:#000000e6; z-index:10001; flex-direction:column; backdrop-filter: blur(3px);
}
#htmlReviewModal iframe { flex:1; width:100%; border:none; border-radius:12px; }
#closeHtmlReview {
  padding:8px 14px; cursor:pointer; background:#007bff; color:#fff; border:none; margin:10px; border-radius:8px;
  align-self:flex-end; box-shadow:0 4px 8px #0000004d;
}
#closeHtmlReview:hover { background:#3399ff; }

/* Back Button */
#backBtn {
  position: relative; padding:8px 16px 8px 24px; font-size:14px;
  margin:10px; color:#fff; background:#007bff; border:none; border-radius:8px;
  cursor:pointer; display:inline-flex; align-items:center; box-shadow:0 3px 6px #0000004d;
}
#backBtn::before {
  content:""; position:absolute; left:8px; top:50%; transform:translateY(-50%);
  width:0; height:0; border-top:6px solid transparent; border-bottom:6px solid transparent;
  border-right:10px solid #fff;
}

/* Responsive */
@media screen and (max-width:600px){
  header input { width:140px; font-size:14px; }
  .item.file { width:50px; height:80px; font-size:0.7rem; }
  .item.folder { width:70px; height:40px; font-size:0.8rem; }
  .editor-overlay textarea { font-size:14px; }
  #backBtn { font-size:12px; padding:6px 12px 6px 20px; }
  
  #search {
  width: 100%;
  padding: 10px 14px;
  border-radius: 10px;
  border: 1px solid #555;   /* garis pinggir abu elegan */
  background: #2a2a2a;
  color: #f1f1f1;
  font-size: 16px;
  transition: all 0.3s ease;
}

#search::placeholder {
  color: #aaa;
  font-style: italic;
}

#search:focus {
  background: #1e1e1e;
  border: 1px solid #459afb; /* border berubah jadi biru saat fokus */
  box-shadow: 0 0 8px #459afb66;
}
/* Tombol Editor Overlay */
.editor-btns button {
  flex: 1; /* biar rata ukuran tombol */
  padding: 10px 14px;
  font-size: 15px;
  font-weight: 600;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.25s ease;
  box-shadow: 0 3px 6px #0000004d;
}

#saveBtn {
  background: #28a745;
  color: #fff;
}
#saveBtn:hover {
  background: #34d058;
}

#copyBtn {
  background: #17a2b8;
  color: #fff;
}
#copyBtn:hover {
  background: #1fc8e3;
}

#reviewBtn {
  background: #ffc107;
  color: #222;
}
#reviewBtn:hover {
  background: #ffd74d;
}

#closeBtn {
  background: #dc3545;
  color: #fff;
}
#closeBtn:hover {
  background: #f25265;
}
</style>
</head>
<body>

<header>
  <button id="backBtn">‚¨Ö Back</button>
  <input type="text" id="search" placeholder="Cari file/folder">
</header>

<div class="container" id="fileContainer"></div>

<!-- Floating Button + -->
<div class="floating">
  <button id="mainBtn">+</button>
  <div id="actionButtons">
    <button onclick="openModal('createFile')">Buat File</button>
    <button onclick="openModal('createFolder')">Buat Folder</button>
    <button onclick="openModal('rename')">Rename</button>
    <button onclick="openModal('delete')">Hapus</button>
  </div>
</div>

<!-- Modal -->
<div class="modal" id="modal">
  <div class="modal-content">
    <h3 id="modalTitle"></h3>
    <input type="text" id="modalInput" placeholder="">
    <select id="fileTypeSelect" style="display:none;">
      <option value="txt">TXT</option>
      <option value="html">HTML</option>
    </select>
    <div style="text-align:right;">
      <button class="confirm" onclick="confirmModal()">OK</button>
      <button class="cancel" onclick="closeModal()">Batal</button>
    </div>
  </div>
</div>

<!-- Editor overlay -->
<div class="editor-overlay" id="editorOverlay">
  <div class="editor-btns">
    <button id="saveBtn">üíæ Simpan</button>
    <button id="copyBtn">üìã Copy</button>
    <button id="reviewBtn">üîé Review</button>
    <button id="closeBtn">‚ùå Tutup</button>
  </div>
  <textarea id="editorArea"></textarea>
</div>

<!-- HTML Review Modal -->
<div id="htmlReviewModal">
  <button id="closeHtmlReview">‚ùå Tutup</button>
  <iframe id="htmlPreview"></iframe>
</div>



<script>
window.addEventListener("DOMContentLoaded", () => {
  let fileData = JSON.parse(localStorage.getItem("fileData") || "[]");
  let currentFolder = null;
  let selectedItem = null;

  const fileContainer = document.getElementById("fileContainer");
  const backBtn = document.getElementById("backBtn");
  const modal = document.getElementById("modal");
  const modalInput = document.getElementById("modalInput");
  const modalTitle = document.getElementById("modalTitle");
  const fileTypeSelect = document.getElementById("fileTypeSelect");
  const mainBtn = document.getElementById("mainBtn");
  const actionButtons = document.getElementById("actionButtons");

  const editorOverlay = document.getElementById("editorOverlay");
  const editorArea = document.getElementById("editorArea");
  const saveBtn = document.getElementById("saveBtn");
  const copyBtn = document.getElementById("copyBtn");
  const reviewBtn = document.getElementById("reviewBtn");
  const closeBtn = document.getElementById("closeBtn");

  const htmlReviewModal = document.getElementById("htmlReviewModal");
  const htmlPreview = document.getElementById("htmlPreview");
  const closeHtmlReview = document.getElementById("closeHtmlReview");

  let currentAction = null;
  let editingFile = null;

  function saveData(){ localStorage.setItem("fileData", JSON.stringify(fileData)); }

  function render(){
    fileContainer.innerHTML = "";
    let filtered = fileData.filter(f => f.parent === (currentFolder?.id || null));
    filtered.forEach(f => {
      const div = document.createElement("div");
      div.className = "item " + (f.type==="folder"?"folder":"file");
      div.textContent = f.name;
      div.onclick = () => {
        selectedItem = f;
        if(f.type==="folder"){ currentFolder=f; render(); }
        else { openEditor(f); }
      };
      fileContainer.appendChild(div);
    });
    saveData();
  }

  window.openModal = (action)=>{
    currentAction = action;
    modal.style.display="flex";
    modalInput.style.display="block";
    fileTypeSelect.style.display=(action==="createFile")?"block":"none";
    modalTitle.textContent=
      action==="createFile"?"Buat File":
      action==="createFolder"?"Buat Folder":
      action==="rename"?"Rename":
      action==="delete"?"Hapus":action;
    modalInput.value="";
    actionButtons.style.display="none";
    mainBtn.style.display="none";
  };

  window.closeModal=()=>{ modal.style.display="none"; mainBtn.style.display="block"; };
  window.confirmModal=()=>{
    if(currentAction==="createFile"){
      const newFile={id:Date.now(),name:modalInput.value,type:fileTypeSelect.value,parent:currentFolder?.id||null,content:""};
      fileData.push(newFile);
    }
    if(currentAction==="createFolder"){
      const newFolder={id:Date.now(),name:modalInput.value,type:"folder",parent:currentFolder?.id||null};
      fileData.push(newFolder);
    }
    if(currentAction==="rename" && selectedItem){ selectedItem.name=modalInput.value; }
    if(currentAction==="delete" && selectedItem){ fileData=fileData.filter(f=>f!==selectedItem); }
    saveData(); render(); closeModal();
  };

  function openEditor(file){
    editingFile = file;
    editorOverlay.style.display="flex";
    editorArea.value = file.content || "";
  }

  saveBtn.onclick=()=>{ if(editingFile){ editingFile.content=editorArea.value; saveData(); alert("Tersimpan!"); } };
  copyBtn.onclick=()=>{ navigator.clipboard.writeText(editorArea.value); alert("Teks disalin!"); };
  reviewBtn.onclick=()=>{
    htmlPreview.srcdoc = editorArea.value;
    htmlReviewModal.style.display="flex";
  };
  closeBtn.onclick=()=>{ editorOverlay.style.display="none"; editingFile=null; };

  closeHtmlReview.onclick=()=>{ htmlReviewModal.style.display="none"; htmlPreview.srcdoc=""; };

  mainBtn.onclick=(e)=>{
    e.stopPropagation();
    actionButtons.style.display=(actionButtons.style.display==="flex")?"none":"flex";
  };
  document.addEventListener("click",(e)=>{
    if(!actionButtons.contains(e.target)&&e.target!==mainBtn){ actionButtons.style.display="none"; }
  });

  backBtn.onclick=()=>{ if(currentFolder){ currentFolder=fileData.find(f=>f.id===currentFolder.parent)||null; render(); } };

  render();
});
</script>

</body>
</html>